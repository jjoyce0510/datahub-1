fragment testFields on Test {
    urn
    name
    category
    description
    definition {
        json
    }
}

fragment testResultsSummaryFields on Test {
    results {
        passingCount
        failingCount
    }
}

query getTest($urn: String!) {
    test(urn: $urn) {
        ...testFields
    }
}

query listTests($input: ListTestsInput!) {
    listTests(input: $input) {
        start
        count
        total
        tests {
            ...testFields
        }
    }
}

mutation createTest($input: CreateTestInput!) {
    createTest(input: $input)
}

mutation updateTest($urn: String!, $input: UpdateTestInput!) {
    updateTest(urn: $urn, input: $input)
}

mutation deleteTest($urn: String!) {
    deleteTest(urn: $urn)
}

mutation runTestDefinition($urn: String!, $test: TestDefinitionInput!) {
    runTestDefinition(urn: $urn, test: $test) {
        status
    }
}

query getTestResultsSummary($urn: String!) {
    test(urn: $urn) {
        ...testResultsSummaryFields
    }
}

mutation runTests($urn: String!) {
    runTests(urn: $urn)
}

query getDatasetTestResults($urn: String!) {
    dataset(urn: $urn) {
        testResults {
            passing {
                test {
                    ...testFields
                }
                type
            }
            failing {
                test {
                    ...testFields
                }
                type
            }
        }
    }
}
